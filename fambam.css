/* ----- Tokens (global) ----- */
:root{
  /* surfaces */
  --panel:#111827;
  --card:rgba(31,41,55,0.40); /* translucent card */

  /* text & accent */
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22d3ee;

  /* background + effects */
  --bg-dim:#404c69;                 /* fallback page bg when no wallpaper */
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --radius:18px;

  /* borders/chips used by tiles & menus */
  --panelBorder:#0b1224;
  --tileBorder:rgba(31,41,55,.95);  /* <-- add (was only in index.html) */
  --chipBg:#0b1224;
  --chipBorder:#334155;

  /* preview boxes (Breakfast/Chores/Points) */
  --previewBg:#081228;              /* <-- add */
  --previewBorder:#27324a;          /* <-- add */

  /* optional glass header tint if you use it elsewhere */
  --glassHeader:rgba(17,24,39,.5);  /* <-- add */
}

html[data-theme="light"]{
  --panel:#f2efe7;
  --card:rgba(255,255,255,0.55);    /* translucent in light */
  --text:#0f1623;
  --muted:#556070;

  --bg-dim:#f0ece4;                 /* fallback bg in light */
  --shadow:0 10px 28px rgba(0,0,0,.08);

  --panelBorder:#e6e2da;
  --tileBorder:#ebe7df;             /* <-- add */
  --chipBg:#fffdf7;
  --chipBorder:#e3ded4;

  --previewBg:#fffdf7;              /* <-- add */
  --previewBorder:#ebe6db;          /* <-- add */

  --glassHeader:rgba(255,255,255,.72); /* <-- add */
}

/* ----- Base layout helpers ----- */
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text); background:var(--bg-dim);
  -webkit-tap-highlight-color:transparent; touch-action:manipulation; overflow-x:hidden;
}
.panel{background:var(--panel); border:1px solid var(--panelBorder); box-shadow:var(--shadow); border-radius:18px; padding:14px}
.app{max-width:1100px; margin:0 auto; padding:20px; display:grid; gap:18px}

/* ----- Buttons (used everywhere) ----- */
.btn{background:var(--chipBg); border:1px solid var(--chipBorder); border-radius:12px; padding:10px 12px; color:var(--text); font:inherit; cursor:pointer}
.btn-primary{background:linear-gradient(180deg,var(--accent),color-mix(in oklab, var(--accent) 70%, #0891b2 30%)); border:none; color:#001018; font-weight:800}

/* ----- Header component (two variants) ----- */
.header{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
.header .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit}
.brand img {
  height:38px;
  width:auto;
  display:block;
}
.header .title .big{font-weight:800; font-size:1.4rem}
.header .title .small{font-weight:600; font-size:.9rem; color:var(--muted)}

.header.panel{ /* “bar” style used on pages with title/subtitle */
  background:var(--panel); border:1px solid var(--panelBorder); box-shadow:var(--shadow);
  border-radius:18px; padding:14px;
}
/* Keep brand + title together on the left, push menu to the right */
.header { justify-content: flex-start; }
.header .menu-wrap { margin-left: auto; }

/* Floating header: just a row, no panel chrome */
.header.floating{ padding:0; background:transparent; border:none; box-shadow:none }

/* Menu button + dropdown (shared) */
.menu-wrap{ position:relative; z-index: 1001; }
.hamburger{ background:var(--chipBg); border:1px solid var(--chipBorder); border-radius:12px; padding:10px 12px }
.menu-dd{
  position:absolute; right:0; top:110%; min-width:220px; z-index:1002;
  background:var(--card); border:1px solid var(--panelBorder); border-radius:12px; box-shadow:var(--shadow); padding:6px; display:none
}
.menu-dd.open{ display:block }
.menu-dd .mi{ width:100%; text-align:left; padding:10px 12px; border:none; background:transparent; color:var(--text); border-radius:10px; cursor:pointer }
.menu-dd .mi:hover{ background:var(--chipBg) }

/* Utility */
.small{font-size:.9rem; color:var(--muted)}
.z-top{ position:relative; z-index:1000 } /* keep header above content when needed */

/* ---------- Family page ---------- */
.page-family .app{
  max-width:1100px;
  margin:0 auto;
  padding:20px;
  display:grid;
  gap:18px;
  grid-template-rows:auto 1fr auto;
}

.page-family header.panel{
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}

.page-family .brand img{ height:38px; display:block; cursor:pointer; }

.page-family .title{ font-weight:800; letter-spacing:.2px; font-size:1.6rem; }

.page-family .grid{
  display:grid;
  gap:14px;
  grid-template-columns:repeat(2,minmax(0,1fr));
}
@media(min-width:860px){
  .page-family .grid{ grid-template-columns:repeat(4,minmax(0,1fr)); }
}

/* If your shared .card/.face/.badge are already in fambam.css, this block is optional. */
.page-family .card{
  display:flex; align-items:center; gap:10px;
  background:var(--card);
  border:1px solid var(--panelBorder);
  border-radius:16px; padding:12px;
  text-decoration:none; color:var(--text);
}
.page-family .face{
  width:64px; height:64px; border-radius:50%; overflow:hidden;
  display:grid; place-items:center; background:var(--chipBg); border:2px solid var(--chipBorder);
  font-weight:800; font-size:24px;
}
.page-family .face img{ width:100%; height:100%; object-fit:cover; }
.page-family .name{ font-weight:800; }
.page-family .badge{
  margin-left:auto; background:var(--previewBg); border:1px solid var(--previewBorder);
  border-radius:999px; padding:4px 8px; font-size:.85rem; color:var(--muted);
}

.page-family footer{ opacity:.75; font-size:.85rem; text-align:center; }
.page-family .version{ opacity:.6; font-size:.8rem; margin-top:6px; }


/* ----- Global drag/selection suppression (for drag-and-drop) ----- */
.dragging,
.dragging * {
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

/* ----- Glass effect for card surfaces (wins over page-level rules) ----- */
.tile,
.page-family .card,
.item,
.modal {
  background: var(--card);
  /* force our blur even if pages set a different blur later */
  backdrop-filter: blur(14px) saturate(1.15) contrast(1.02) !important;
  -webkit-backdrop-filter: blur(14px) saturate(1.15) contrast(1.02) !important;
  background-clip: padding-box;
}
